.. _photon_matter_interaction:

.. image:: _static/pmi.png
    :scale: 33 %

Photon Matter Interaction
=========================

Input/Output data description
-----------------------------

The input/output data is expected in hdf5 format, and the glossary can be found below. Photon matter interaction module is responsible for reading in and writing out in the format specified below.

pmi_out_<7 digit ID>.h5 (Output HDF glossary)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| Field name                        | Description                                                                                        | Data type | Units    |
+===================================+====================================================================================================+===========+==========+
| **data/**                         |                                                                                                    |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/ff       | Atomic form factor in 2D array (number of unique ions x length of atomFormFactorQ)                 | Float     |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/halfQ    | Reciprocal space spanned by the atomic form factor in 1D array (number of samples of reciprocal q) | Float     | 1/A      |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/Nph      | Numbers of photons in the beam                                                                     | Int       | ph       |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/r        | Atomic position in real space in 2D array (number of ions x 3D coordinates {x,y,z})                | Float     |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/T        | List of unique ID numbers given to each atomFormFactor in 1D array (number of unique ions)         | Int       |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/Z        | List of atomType present at atomPosition in 1D array (number of ions x number of frames)           | Int       |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/xyz      | List of indices of ff for each atom in Z                                                           | Int       |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/Sq_halfQ | Reciprocal space spanned by the Compton scattering in 1D array (number of samples of reciprocal q) | Float     | 1/A      |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/Sq_bound | Compton scattering by bound electrons in 1D array (length of Sq_Q)                                 | Float     |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| data/snp_<7 digit index>/Sq_free  | Compton scattering by free electrons in 1D array (length of Sq_Q)                                  | Float     |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| **history**                       | **Information about input data**                                                                   |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| history/parent/detail             | Details of the parent inclusing /data, /info, /misc, /params                                       |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| history/parent/parent             | Iteratively list parent modules                                                                    |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| **info/**                         |                                                                                                    |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| info/package_version              | Package version                                                                                    |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| info/contact                      | Contact details of author                                                                          |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| info/data_description             | Short description of what the data is                                                              |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| info/method_description           | Short description of what method was used to generate the data                                     |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| **misc/**                         | **Miscellaneous information**                                                                      |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| **params/**                       | **Parameters used to run the module**                                                              |           |          |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+
| **version**                       | **hdf5 format version**                                                                            | Float     | 0.1      |
+-----------------------------------+----------------------------------------------------------------------------------------------------+-----------+----------+

Python script for HDF
---------------------
`Script on bitbucket <https://bitbucket.org/chunhongyoon/s2e>`_

